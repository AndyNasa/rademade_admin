<%
    related_list_fields = @related_model_info.data_items.list_fields
%><% content_for :page_header do %>
  <h3><%= @related_model_info.item_name %></h3><%
end
%><% content_for :content do %><%
    autocomplete_uri = admin_link_autocomplete_uri(@item, params[:relation], {
        :format => :json
    })
    %><%= content_tag(
        :input,
        nil,
        :type => 'hidden',
        :class => 'select2-add-link',
        :'data-model' => @model_class.to_s,
        :'data-rel-list-url' => autocomplete_uri
    )%><table class="table-box"><%
        concat render @template_service.table_head_block, {
            :list_fields => related_list_fields
        }
        has_position = @sortable_service.has_position?
        %><tbody class="table-content" data-position='false'><%
            @items.each do |item|
                %><tr class="table-line" <%
                    if has_position
                        %> id='<%= item.position %>'<%
                    end
                %> data-id='<%= item.id %>'><%
                    related_list_fields.each do |field|
                        %><td><%= display_item_value(item, field) %></td><%
                    end
                    %><td class="table-item">
                        <span class="table-actions"><%=
                            button_to t('rademade_admin.unlink'), admin_unlink_uri(@item, params[:relation], {
                                :related_id => item.id
                                }), {
                                      :method => :delete,
                                      :form => { :class => 'delete-item-form' }
                        } %></span>
                    </td>
                </tr><%
            end
        %></tbody>
    </table><%
    concat render @template_service.pagination_block
end

concat render :template => @template_service.inner_layout %>